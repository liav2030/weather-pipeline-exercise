המערכת דוגמת את מזג האוויר בזמן אמת מה api של openweather מעבדת את הנתונים ושולחת אותם לRabbitMQ.
משם logstash צורך את הנתונים כ consumer ומזרים אותם לelasticsearch שהוא משמש כ datasource של grafana.
בנוסף נבנה cicd מלא משולב runners hosted and self-hosted לצורך בנייה קלה ומהירה בrunner מנוהל ופריסה על המחשב האישי שלי.

א. collector
תוכנית שדוגמת את ה-API של OpenWeather כל שעה , ושולחת הודעות JSON ל־RabbitMQ.

ב.RabbitMQ
משמש כמעין מוסר מידע אסינכרוני שמעביר את הודעות הנתונים בין רכיב Collector לבין רכיב Logstash.

ג.Logstash
קורא את הנתונים מ־RabbitMQ וממיר את הפלט לפורמט שelasticsearch יודע לעבוד איתו.

ד.elasticsearch 
מאחסן את כל המידע ומשמש כ datasource.

ה.grafana
מציג לנו את המידע מelasticsearch בצורה ויזואלית.


ו. Docker Compose
כל המערכת רצה על זה, ועל מנת להרים את כל המערכת נדרש לעשות רק docker compose up -d (בהנחה והרצתם את ה pipeline שיבנה את ה collector).

ז. pipeline
בונה ובודק את ה Collector שנכתב ב Python, מעלה את הimage לdockerhub שלי ומשתמש ב tag ייחודי שיוכנס כplaceholder בשלב ה deploy על ידי עריכה של docker compose .
בנוסף השתמשתי ב secrets של github שמתי שם משתנים כמו טוקנים חשובים או כתובות שאצטרך, גם בגלל אבטחה וגם בגלל גנריות.


לבטים ואתגרים:
אני חושב שבדיעבד הבחירה בgrafana הייתה פחות טובה והייתי צריך להשתמש ב kibana בגלל שהם מאותו סל מערכות וכנראה שהתתממשקות הייתה אפילו נוחה יותר מזו שבgrafana .
ראנרים- היה לי אתגר עם הראנרים בגלל שהרגשתי שאני צריך לבחור בין runnerים מנוהלים או להקים בעצמי על המחשב self-hosted, לבסוף החלטתי לשלב אותם ככה שהחלק של ה בניה והעלאה של הקוד יבוצע על runner של github והפריסה עצמה תעשה על הrunner שהקמתי במחשב שלי, כי התוצאה הסופית הייתה צריכה להיות לוקאלית ולא באיזה ענן כלשהו. זה היה לא אינטואטיבי אבל אני חושב שזה עשה את העבודה בצורה מעולה.

בהתחלה הלכתי על buikd שמתבצע ישירות בdocker compose אבל רק לאחר מימוש הבנתי שזה לא עונה בידיוק לתנאי המשימה אז שיניתי את הארכיטקטורה לגמרי למה שיש עכשיו.

חשבתי אם להרים את כל המערכת (Collector, Elastic, Logstash, Grafana, RabbitMQ) באותו Compose אחד
או להפריד את ה־Collector לריצה עצמאית. בסוף החלטתי להשאיר הכל ב compose אחד כדי לשמור על עקביות.
